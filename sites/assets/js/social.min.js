!function(){"use strict";var e={props:["liked_by","comment_count"],computed:{like_count:function(){return this.split_string(this.liked_by).length},post_liked:function(){return this.split_string(this.liked_by).includes(frappe.session.user)},liked_by_data:function(){return JSON.stringify(this.split_string(this.liked_by))}},methods:{split_string:function(e){return e&&""!==e?e.split("\n"):[]}}},t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"post-action-container"},[n("div",{staticClass:"like",on:{click:function(t){return e.$emit("toggle_like")}}},[n("i",{staticClass:"octicon octicon-heart",class:{liked:e.post_liked}}),e._v(" "),n("span",{staticClass:"likes",attrs:{"data-liked-by":e.liked_by_data}},[e._v(e._s(e.like_count))])]),e._v(" "),n("div",{staticClass:"comment",on:{click:function(t){return e.$emit("toggle_comment")}}},[n("i",{staticClass:"octicon octicon-comment"}),e._v(" "),n("span",{staticClass:"comment_count"},[e._v(e._s(e.comment_count))])])])};t._withStripped=!0;var n=function(e,t,n,a,i,s,o,r){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/PostAction.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=a,t&&(d=function(e){t.call(this,o(e))}),void 0!==d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return l}({render:t,staticRenderFns:[]},function(e){e&&e("data-v-3d0da32e_0",{source:".post-action-container[data-v-3d0da32e] {\n  display: flex;\n  background-color: #F6F6F6;\n  padding: 10px;\n}\n.post-action-container .comment[data-v-3d0da32e],\n.post-action-container .like[data-v-3d0da32e] {\n  padding-right: 20px;\n  cursor: pointer;\n  color: #8d99a6;\n}\n.post-action-container .comment span[data-v-3d0da32e],\n.post-action-container .like span[data-v-3d0da32e] {\n  padding: 5px;\n}\n.post-action-container .comment[data-v-3d0da32e]:hover,\n.post-action-container .like[data-v-3d0da32e]:hover {\n  color: #707f90;\n}\n.post-action-container .likes[data-v-3d0da32e] {\n  cursor: pointer;\n}\n.post-action-container .liked[data-v-3d0da32e] {\n  color: #fc4f51;\n}\n.post-action-container .liked[data-v-3d0da32e]:hover {\n  color: #fd8183 !important;\n}\n.post-action-container .pinned[data-v-3d0da32e] {\n  color: black;\n}\n",map:{version:3,sources:["PostAction.vue"],names:[],mappings:"AAAA;EACE,aAAa;EACb,yBAAyB;EACzB,aAAa;AACf;AACA;;EAEE,mBAAmB;EACnB,eAAe;EACf,cAAc;AAChB;AACA;;EAEE,YAAY;AACd;AACA;;EAEE,cAAc;AAChB;AACA;EACE,eAAe;AACjB;AACA;EACE,cAAc;AAChB;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,YAAY;AACd",file:"PostAction.vue",sourcesContent:[".post-action-container {\n  display: flex;\n  background-color: #F6F6F6;\n  padding: 10px;\n}\n.post-action-container .comment,\n.post-action-container .like {\n  padding-right: 20px;\n  cursor: pointer;\n  color: #8d99a6;\n}\n.post-action-container .comment span,\n.post-action-container .like span {\n  padding: 5px;\n}\n.post-action-container .comment:hover,\n.post-action-container .like:hover {\n  color: #707f90;\n}\n.post-action-container .likes {\n  cursor: pointer;\n}\n.post-action-container .liked {\n  color: #fc4f51;\n}\n.post-action-container .liked:hover {\n  color: #fd8183 !important;\n}\n.post-action-container .pinned {\n  color: black;\n}\n"]},media:void 0})},e,"data-v-3d0da32e",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=a?i.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=i.source,d=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),a&&(l.setAttribute("data-group",s),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(a&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var p=document.createTextNode(r),c=o.element.childNodes;c[d]&&o.element.removeChild(c[d]),c.length?o.element.insertBefore(p,c[d]):o.element.appendChild(p)}}}}}),a={props:["comments"],mounted:function(){this.make_comment_section(),this.make_mentions_clickable(this.$refs.comments)},methods:{get_avatar:function(e){return frappe.avatar(e)},get_time:function(e){return comment_when(e,!0)},go_to_profile_page:function(e){frappe.set_route("social","profile",e)},make_comment_section:function(){this.comment_section=frappe.ui.form.make_control({parent:this.$refs["comment-section"],only_input:!0,render_input:!0,no_wrapper:!0,mentions:this.get_names_for_mentions(),df:{fieldtype:"Comment",fieldname:"comment"},on_submit:this.create_comment.bind(this)})},create_comment:function(){var e=this.comment_section.get_value().replace("<div><br></div>","");strip_html(e)&&(frappe.utils.play_sound("click"),this.$emit("create_comment",e),this.comment_section.clear())},get_names_for_mentions:function(){var e=Object.keys(frappe.boot.user_info).filter(function(e){return!["Administrator","Guest"].includes(e)});return(e=e.filter(function(e){return 1==frappe.boot.user_info[e].allowed_in_mentions})).map(function(e){return frappe.boot.user_info[e].name})},make_mentions_clickable:function(e){var t=this;Array.from(e.getElementsByClassName("mention")).forEach(function(e){e.classList.add("cursor-pointer"),e.addEventListener("click",function(){t.go_to_profile_page(e.dataset.value)})})}}},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"comment-box flex-column"},[n("div",{staticClass:"text-muted comment-label"},[e._v(e._s(e.__("Add a comment")))]),e._v(" "),n("div",{ref:"comment-section"}),e._v(" "),n("div",{staticClass:"flex justify-between"},[n("div",{staticClass:"text-muted small"},[e._v("\n\t\t\t\t"+e._s(e.__("Ctrl+Enter to add comment"))+"\n\t\t\t")]),e._v(" "),n("button",{staticClass:"btn btn-primary btn-sm",on:{click:e.create_comment}},[e._v("\n\t\t\t\t"+e._s(e.__("Comment"))+"\n\t\t\t")])])]),e._v(" "),e.comments.length?n("div",{ref:"comments",staticClass:"comment-list"},e._l(e.comments,function(t){return n("div",{key:t.name,staticClass:"comment"},[n("span",{staticClass:"cursor-pointer",domProps:{innerHTML:e._s(e.get_avatar(t.owner))},on:{click:function(n){return e.go_to_profile_page(t.owner)}}}),e._v(" "),n("span",{staticClass:"content",domProps:{innerHTML:e._s(t.content)}}),e._v(" "),n("span",{staticClass:"text-muted",domProps:{innerHTML:e._s(e.get_time(t.creation))}})])}),0):e._e()])};i._withStripped=!0;var s=function(e,t,n,a,i,s,o,r){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/PostComment.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=a,t&&(d=function(e){t.call(this,o(e))}),void 0!==d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return l}({render:i,staticRenderFns:[]},function(e){e&&e("data-v-54ac5e16_0",{source:".comment-box .comment-label[data-v-54ac5e16] {\n  margin-bottom: 5px;\n}\n.comment-box[data-v-54ac5e16]  .ql-editor {\n  background: white;\n  border-radius: 4px;\n  min-height: 60px !important;\n  border: 1px solid #d1d8dd;\n}\n.comment-box button[data-v-54ac5e16] {\n  padding: 2px 5px;\n  font-size: 10px;\n  align-self: flex-end;\n}\n.comment-list[data-v-54ac5e16] {\n  margin-top: 10px;\n}\n.comment-list .comment[data-v-54ac5e16] {\n  display: flex;\n  padding: 5px 0;\n}\n.comment-list .comment .comment-input-wrapper[data-v-54ac5e16] {\n  margin-top: -6px;\n  font-size: 11px;\n}\n.comment-list .comment .content[data-v-54ac5e16] {\n  align-self: center;\n  font-size: 12px;\n  flex: 1;\n}\n",map:{version:3,sources:["PostComment.vue"],names:[],mappings:"AAAA;EACE,kBAAkB;AACpB;AACA;EACE,iBAAiB;EACjB,kBAAkB;EAClB,2BAA2B;EAC3B,yBAAyB;AAC3B;AACA;EACE,gBAAgB;EAChB,eAAe;EACf,oBAAoB;AACtB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,aAAa;EACb,cAAc;AAChB;AACA;EACE,gBAAgB;EAChB,eAAe;AACjB;AACA;EACE,kBAAkB;EAClB,eAAe;EACf,OAAO;AACT",file:"PostComment.vue",sourcesContent:[".comment-box .comment-label {\n  margin-bottom: 5px;\n}\n.comment-box ::v-deep .ql-editor {\n  background: white;\n  border-radius: 4px;\n  min-height: 60px !important;\n  border: 1px solid #d1d8dd;\n}\n.comment-box button {\n  padding: 2px 5px;\n  font-size: 10px;\n  align-self: flex-end;\n}\n.comment-list {\n  margin-top: 10px;\n}\n.comment-list .comment {\n  display: flex;\n  padding: 5px 0;\n}\n.comment-list .comment .comment-input-wrapper {\n  margin-top: -6px;\n  font-size: 11px;\n}\n.comment-list .comment .content {\n  align-self: center;\n  font-size: 12px;\n  flex: 1;\n}\n"]},media:void 0})},a,"data-v-54ac5e16",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=a?i.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=i.source,d=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),a&&(l.setAttribute("data-group",s),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(a&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var p=document.createTextNode(r),c=o.element.childNodes;c[d]&&o.element.removeChild(c[d]),c.length?o.element.insertBefore(p,c[d]):o.element.appendChild(p)}}}}}),o={props:["options"]},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown"},[n("span",{staticClass:"caret cursor-pointer dropdown-toggle",attrs:{"data-toggle":"dropdown"}}),e._v(" "),n("ul",{staticClass:"dropdown-menu"},e._l(e.options,function(t){return n("li",{key:t.label},[n("a",{on:{click:t.action}},[e._v(e._s(t.label))])])}),0)])};r._withStripped=!0;var d={props:["post"],components:{PostAction:n,PostComment:s,PostDropdownMenu:function(e,t,n,a,i,s,o,r){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/PostDropdownMenu.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=a,t&&(d=function(e){t.call(this,o(e))}),void 0!==d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return l}({render:r,staticRenderFns:[]},function(e){e&&e("data-v-30437a2b_0",{source:".dropdown-menu[data-v-30437a2b] {\n  min-width: 100px;\n  left: auto;\n  right: 0;\n}\n.dropdown-menu a[data-v-30437a2b] {\n  padding: 12px;\n  font-size: 10px;\n}\n",map:{version:3,sources:["PostDropdownMenu.vue"],names:[],mappings:"AAAA;EACE,gBAAgB;EAChB,UAAU;EACV,QAAQ;AACV;AACA;EACE,aAAa;EACb,eAAe;AACjB",file:"PostDropdownMenu.vue",sourcesContent:[".dropdown-menu {\n  min-width: 100px;\n  left: auto;\n  right: 0;\n}\n.dropdown-menu a {\n  padding: 12px;\n  font-size: 10px;\n}\n"]},media:void 0})},o,"data-v-30437a2b",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=a?i.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=i.source,d=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),a&&(l.setAttribute("data-group",s),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(a&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var p=document.createTextNode(r),c=o.element.childNodes;c[d]&&o.element.removeChild(c[d]),c.length?o.element.insertBefore(p,c[d]):o.element.appendChild(p)}}}}})},data:function(){return{user_avatar:frappe.avatar(this.post.owner,"avatar-medium"),post_time:comment_when(this.post.creation),user_name:frappe.user_info(this.post.owner).fullname,comment_count:0,comments:[],show_comments:!1,is_globally_pinnable:frappe.user_roles.includes("System Manager")&&frappe.social.is_home_page(),is_pinnable:!1,is_user_post_owner:this.post.owner===frappe.session.user}},computed:{can_pin:function(){return this.is_globally_pinnable||this.is_pinnable},is_pinned:function(){return this.post.is_globally_pinned&&frappe.social.is_home_page()},options:function(){var e=[];return this.can_pin&&(this.is_pinned?e.push({label:__("Unpin"),action:this.toggle_pin}):e.push({label:__("Pin Globally"),action:this.toggle_pin})),this.is_user_post_owner&&e.push({label:__("Delete"),action:this.delete_post}),e}},created:function(){var e=this;frappe.db.get_list("Post Comment",{fields:["name","content","owner","creation"],order_by:"creation desc",filters:{parent:this.post.name}}).then(function(t){e.comments=t}),this.post.liked_by||this.$set(this.post,"liked_by",""),frappe.realtime.on("new_post_comment"+this.post.name,function(t){e.comments=[t].concat(e.comments)}),frappe.realtime.on("update_liked_by"+this.post.name,this.update_liked_by),frappe.realtime.on("delete_post"+this.post.name,function(){e.$emit("delete-post")}),this.$root.$on("user_image_updated",function(){e.user_avatar=frappe.avatar(e.post.owner,"avatar-medium")})},mounted:function(){var e=this;this.$refs.content.querySelectorAll("img").forEach(function(t){t.addEventListener("click",function(){e.$root.$emit("show_preview",t.src)})}),this.$refs.content.querySelectorAll("a").forEach(function(t){t.target="blank",e.generate_preview(t)})},methods:{goto_profile:function(e){frappe.set_route("social","profile/"+e)},toggle_comment:function(){this.show_comments=!this.show_comments},update_liked_by:function(e){this.post.liked_by=e},toggle_like:function(){frappe.xcall("frappe.social.doctype.post.post.toggle_like",{post_name:this.post.name})},toggle_pin:function(){var e=this;this.is_globally_pinnable&&frappe.db.set_value("Post",this.post.name,"is_globally_pinned",cint(!this.is_pinned)).then(function(t){return e.post.is_globally_pinned=cint(t.message.is_globally_pinned)}),this.is_pinnable&&frappe.db.set_value("Post",this.post.name,"is_pinned",cint(!this.is_pinned)).then(function(t){return e.post.is_pinned=cint(t.message.is_pinned)})},create_comment:function(e){var t=frappe.model.get_new_doc("Post Comment");t.content=e,t.parent=this.post.name,frappe.db.insert(t)},delete_post:function(){var e=this;frappe.confirm(__("Are you sure you want to delete this post?"),function(){frappe.dom.freeze(),frappe.xcall("frappe.social.doctype.post.post.delete_post",{post_name:e.post.name}).then(frappe.dom.unfreeze)})},update_seen:function(){var e=this;frappe.xcall("frappe.social.doctype.post.post.set_seen",{post_name:this.post.name}).then(function(){return e.post.seen=!0})},generate_preview:function(e){frappe.xcall("frappe.social.doctype.post.post.get_link_info",{url:e.href}).then(function(t){var n=frappe.ellipsis(t["og:title"]||t.title,60),a=frappe.ellipsis(t["og:description"]||t.description,280),i=t["og:image"],s=t["og:url"];n&&e.insertAdjacentHTML("afterend",'\n\t\t\t\t\t\t<a href="'+s+'" target="blank" class="preview-card" class="flex">\n\t\t\t\t\t\t\t<img src="'+i+'"/>\n\t\t\t\t\t\t\t<div class="flex-column">\n\t\t\t\t\t\t\t\t<h5>'+n+'</h5>\n\t\t\t\t\t\t\t\t<p class="text-muted">'+a+"</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t")}).catch(console.error)}}},l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"post-card"},[n("div",{staticClass:"post-body",class:{"pinned ":e.is_pinned}},[n("div",{staticClass:"pull-right flex"},[e.is_pinned?n("div",{staticClass:"pin-option"},[e._v("\n\t\t\t\tGlobally Pinned\n\t\t\t")]):e._e(),e._v(" "),e.options.length?n("post-dropdown-menu",{staticClass:"post-dropdown-menu",attrs:{options:e.options}}):e._e(),e._v(" "),n("transition",{attrs:{name:"fade"}},[this.post.seen?e._e():n("span",{staticClass:"indicator blue"})])],1),e._v(" "),n("div",{staticClass:"user-avatar",domProps:{innerHTML:e._s(e.user_avatar)},on:{click:function(t){return e.goto_profile(e.post.owner)}}}),e._v(" "),n("a",{staticClass:"user-name",on:{click:function(t){return e.goto_profile(e.post.owner)}}},[e._v(e._s(e.user_name))]),e._v(" "),n("div",{staticClass:"text-muted",domProps:{innerHTML:e._s(e.post_time)}}),e._v(" "),n("div",{ref:"content",staticClass:"content",domProps:{innerHTML:e._s(e.post.content)}})]),e._v(" "),n("post-action",{attrs:{liked_by:e.post.liked_by,comment_count:e.comments.length},on:{toggle_comment:e.toggle_comment,toggle_like:e.toggle_like}}),e._v(" "),e.show_comments?n("post-comment",{staticClass:"post-comments",attrs:{comments:e.comments},on:{create_comment:e.create_comment}}):e._e()],1)};l._withStripped=!0;var p=function(e,t,n,a,i,s,o,r){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/Post.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=a,t&&(d=function(e){t.call(this,o(e))}),void 0!==d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return l}({render:l,staticRenderFns:[]},function(e){e&&e("data-v-6e919c46_0",{source:".post-comments[data-v-6e919c46] {\n  padding: 15px 46px;\n  padding-top: 0px;\n  background: #F6F6F6;\n}\n.indicator[data-v-6e919c46] {\n  margin-left: 15px;\n}\n.fade-enter-active[data-v-6e919c46],\n.fade-leave-active[data-v-6e919c46] {\n  transition: opacity 0.8s;\n}\n.fade-enter[data-v-6e919c46],\n.fade-leave-to[data-v-6e919c46] {\n  opacity: 0;\n}\n",map:{version:3,sources:["Post.vue"],names:[],mappings:"AAAA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,mBAAmB;AACrB;AACA;EACE,iBAAiB;AACnB;AACA;;EAEE,wBAAwB;AAC1B;AACA;;EAEE,UAAU;AACZ",file:"Post.vue",sourcesContent:[".post-comments {\n  padding: 15px 46px;\n  padding-top: 0px;\n  background: #F6F6F6;\n}\n.indicator {\n  margin-left: 15px;\n}\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.8s;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n}\n"]},media:void 0})},d,"data-v-6e919c46",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=a?i.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=i.source,d=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),a&&(l.setAttribute("data-group",s),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(a&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var p=document.createTextNode(r),c=o.element.childNodes;c[d]&&o.element.removeChild(c[d]),c.length?o.element.insertBefore(p,c[d]):o.element.appendChild(p)}}}}}),c=function(){var e=this.$createElement;this._self._c;return this._m(0)};c._withStripped=!0;var A={props:["post_list_filter"],components:{Post:p,PostSkeleton:function(e,t,n,a,i,s,o,r){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/PostSkeleton.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=a,t&&(d=function(e){t.call(this,o(e))}),void 0!==d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return l}({render:c,staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"post-skeleton flex-column justify-between"},[t("div",{staticClass:"post-skeleton-body"},[t("div",{staticClass:"flex"},[t("div",{staticClass:"avatar avatar-medium"}),this._v(" "),t("div",{staticClass:"user-name"})]),this._v(" "),t("div",{staticClass:"content"})]),this._v(" "),t("div",{staticClass:"post-skeleton-foot"})])}]},function(e){e&&e("data-v-6ddccc6e_0",{source:"@keyframes load-data-v-6ddccc6e {\n0% {\n    background-position: -100px;\n}\n40%,\n  100% {\n    background-position: 500px;\n}\n}\n.post-skeleton[data-v-6ddccc6e] {\n  height: 250px;\n  border-radius: 4px;\n  max-width: 600px;\n  border: 1px solid #ededed;\n  margin-bottom: 15px;\n}\n.post-skeleton .post-skeleton-body[data-v-6ddccc6e] {\n  padding: 15px;\n}\n.post-skeleton .post-skeleton-body .user-name[data-v-6ddccc6e] {\n  height: 10px;\n  width: 100px;\n  margin-left: 5px;\n}\n.post-skeleton .post-skeleton-body .content[data-v-6ddccc6e] {\n  height: 100px;\n  margin: 15px 0 0 46px;\n}\n.post-skeleton .post-skeleton-body .user-name[data-v-6ddccc6e],\n.post-skeleton .post-skeleton-body .avatar[data-v-6ddccc6e],\n.post-skeleton .post-skeleton-body .content[data-v-6ddccc6e] {\n  background-image: linear-gradient(90deg, #f8f8f8 0px, #fcfcfc 40px, #f8f8f8 80px);\n  background-size: 600px;\n  border-radius: 4px;\n  animation: load-data-v-6ddccc6e 3s infinite linear;\n}\n.post-skeleton .post-skeleton-foot[data-v-6ddccc6e] {\n  width: 100%;\n  height: 40px;\n  background: #f8f8f8;\n}\n",map:{version:3,sources:["PostSkeleton.vue","/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/PostSkeleton.vue"],names:[],mappings:"AAAA;AACE;IACE,2BAA2B;AAC7B;AACA;;IAEE,0BAA0B;AAC5B;AACF;AACA;EACE,aAAa;EACb,kBAAkB;EAClB,gBAAgB;ECClB,yBAAA;EACA,mBAAA;AACA;ADCA;ECCA,aAAA;AACA;AACA;EACA,YAAA;EDCE,YAAY;ECCd,gBAAA;AACA;AACA;EACA,aAAA;EDCE,qBAAqB;ACCvB;AACA;;;EAGA,iFAAA;EACA,sBAAA;EACA,kBAAA;EACA,kDAAA;AACA;AACA;EACA,WAAA;EACA,YAAA;EACA,mBAAA;AACA",file:"PostSkeleton.vue",sourcesContent:["@keyframes load {\n  0% {\n    background-position: -100px;\n  }\n  40%,\n  100% {\n    background-position: 500px;\n  }\n}\n.post-skeleton {\n  height: 250px;\n  border-radius: 4px;\n  max-width: 600px;\n  border: 1px solid #ededed;\n  margin-bottom: 15px;\n}\n.post-skeleton .post-skeleton-body {\n  padding: 15px;\n}\n.post-skeleton .post-skeleton-body .user-name {\n  height: 10px;\n  width: 100px;\n  margin-left: 5px;\n}\n.post-skeleton .post-skeleton-body .content {\n  height: 100px;\n  margin: 15px 0 0 46px;\n}\n.post-skeleton .post-skeleton-body .user-name,\n.post-skeleton .post-skeleton-body .avatar,\n.post-skeleton .post-skeleton-body .content {\n  background-image: linear-gradient(90deg, #f8f8f8 0px, #fcfcfc 40px, #f8f8f8 80px);\n  background-size: 600px;\n  border-radius: 4px;\n  animation: load 3s infinite linear;\n}\n.post-skeleton .post-skeleton-foot {\n  width: 100%;\n  height: 40px;\n  background: #f8f8f8;\n}\n",'<template>\n\t<div class="post-skeleton flex-column justify-between">\n\t\t<div class="post-skeleton-body">\n\t\t\t<div class="flex">\n\t\t\t\t<div class="avatar avatar-medium"></div>\n\t\t\t\t<div class="user-name"></div>\n\t\t\t</div>\n\t\t\t<div class="content"></div>\n\t\t</div>\n\t\t<div class="post-skeleton-foot"></div>\n\t</div>\n</template>\n<style lang="less" scoped>\n@base-color: #f8f8f8;\n@shine-color: #fcfcfc;\n@animation-duration: 3s;\n\n@keyframes load {\n\t0% {\n\t\tbackground-position: -100px\n\t}\n\n\t40%, 100% {\n\t\tbackground-position: 500px\n\t}\n}\n\n.background-img() {\n\tbackground-image: linear-gradient(90deg, @base-color 0px, @shine-color 40px, @base-color 80px);\n\tbackground-size: 600px\n}\n.post-skeleton {\n\theight: 250px;\n\tborder-radius: 4px;\n\tmax-width: 600px;\n\tborder: 1px solid #ededed;\n\tmargin-bottom: 15px;\n\t.post-skeleton-body {\n\t\tpadding: 15px;\n\t\t.user-name {\n\t\t\theight: 10px;\n\t\t\twidth: 100px;\n\t\t\tmargin-left: 5px;\n\t\t}\n\t\t.content {\n\t\t\theight: 100px;\n\t\t\tmargin: 15px 0 0 46px;\n\t\t}\n\t\t.user-name, .avatar, .content {\n\t\t\t.background-img();\n\t\t\tborder-radius: 4px;\n\t\t\tanimation: load @animation-duration infinite linear;\n\t\t}\n\t}\n\t.post-skeleton-foot {\n\t\twidth: 100%;\n\t\theight: 40px;\n\t\tbackground: @base-color;\n\t}\n}\n</style>']},media:void 0})},{},"data-v-6ddccc6e",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=a?i.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=i.source,d=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),a&&(l.setAttribute("data-group",s),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(a&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var p=document.createTextNode(r),c=o.element.childNodes;c[d]&&o.element.removeChild(c[d]),c.length?o.element.insertBefore(p,c[d]):o.element.appendChild(p)}}}}})},data:function(){return{posts:[],more_posts_available:!0,loading_posts:!1,load_new:!1}},created:function(){var e=this;window.addEventListener("scroll",this.handle_scroll),this.update_posts(),this.$parent.$on("load_new_posts",function(){e.update_posts()}),frappe.realtime.on("global_pin",function(){e.update_posts()})},watch:{post_list_filter:function(e,t){JSON.stringify(e)!==JSON.stringify(t)&&this.update_posts()}},methods:{get_posts:function(e,t){return frappe.xcall("frappe.social.doctype.post.post.get_posts",{filters:e,limit_start:t?this.posts.length:0})},update_posts:function(e){var t=this;if(void 0===e&&(e=!1),this.post_list_filter){this.loading_posts=!0;var n=Object.assign({},this.post_list_filter);this.get_posts(n,e).then(function(n){e?(n.length||(t.more_posts_available=!1),t.posts=t.posts.concat(n)):t.posts=n}).finally(function(){t.loading_posts=!1,t.track_seen()})}},handle_scroll:frappe.utils.debounce(function(){this.track_seen(),document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight&&this.more_posts_available&&(this.loading_posts||this.update_posts(!0))},500),track_seen:function(){(this.$refs.posts||[]).forEach(function(e){!e.post.seen&&frappe.dom.is_element_in_viewport(e.$el,50)&&e.update_seen()})},delete_post:function(e){this.posts.splice(e,1)}},destroyed:function(){window.removeEventListener("scroll",this.handle_scroll)}},u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loading_posts&&!e.posts.length?n("div",e._l(5,function(e){return n("post-skeleton",{key:e})}),1):e._e(),e._v(" "),n("transition-group",{attrs:{name:"flip-list"}},e._l(e.posts,function(t,a){return n("post",{key:t.name,ref:"posts",refInFor:!0,attrs:{post:t},on:{"delete-post":function(t){return e.delete_post(a)}}})}),1),e._v(" "),e.loading_posts||e.posts.length?e._e():n("div",{staticClass:"no-post-message text-muted"},[e._v("\n\t\t"+e._s(e.__("No posts yet"))+"\n\t")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading_posts&&e.posts.length,expression:"loading_posts && posts.length"}],staticClass:"text-center text-muted padding"},[e._v("\n\t\t"+e._s(e.__("Fetching posts..."))+"\n\t")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.posts.length&&!e.loading_posts&&!e.more_posts_available,expression:"posts.length && !loading_posts && !more_posts_available"}],staticClass:"text-center text-muted padding"},[e._v("\n\t\t"+e._s(e.__("No more posts"))+"\n\t")])],1)};u._withStripped=!0;var f=function(e,t,n,a,i,s,o,r){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/PostLoader.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=a,t&&(d=function(e){t.call(this,o(e))}),void 0!==d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return l}({render:u,staticRenderFns:[]},function(e){e&&e("data-v-10d730dc_0",{source:".no-post-message[data-v-10d730dc] {\n  height: 200px;\n  text-align: center;\n  vertical-align: middle;\n  line-height: 200px;\n}\n.flip-list-move[data-v-10d730dc],\n.flip-list-to[data-v-10d730dc] {\n  transition: transform 0.3s;\n}\n",map:{version:3,sources:["PostLoader.vue"],names:[],mappings:"AAAA;EACE,aAAa;EACb,kBAAkB;EAClB,sBAAsB;EACtB,kBAAkB;AACpB;AACA;;EAEE,0BAA0B;AAC5B",file:"PostLoader.vue",sourcesContent:[".no-post-message {\n  height: 200px;\n  text-align: center;\n  vertical-align: middle;\n  line-height: 200px;\n}\n.flip-list-move,\n.flip-list-to {\n  transition: transform 0.3s;\n}\n"]},media:void 0})},A,"data-v-10d730dc",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=a?i.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=i.source,d=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),a&&(l.setAttribute("data-group",s),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(a&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var p=document.createTextNode(r),c=o.element.childNodes;c[d]&&o.element.removeChild(c[d]),c.length?o.element.insertBefore(p,c[d]):o.element.appendChild(p)}}}}}),m={data:function(){return{frequently_visited_list:[]}},created:function(){this.set_frequently_visited_list()},methods:{goto_list:function(e){frappe.set_route(e)},set_frequently_visited_list:function(){var e=this;frappe.xcall("frappe.social.doctype.post.post.frequently_visited_links").then(function(t){e.frequently_visited_list=t})},get_label:function(e){return frappe.utils.get_route_label(e)},go_to_profile_page:function(){frappe.set_route("social","profile",frappe.session.user)},go_to_user_list:function(){frappe.set_route("social","users")}}},_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-column"},[n("a",{staticClass:"leaderboard-link",on:{click:function(t){return t.preventDefault(),e.go_to_user_list()}}},[e._v("\n\t\t"+e._s(e.__("Leaderboard"))+"\n\t")]),e._v(" "),e.frequently_visited_list.length?n("div",{staticClass:"links"},[n("div",{staticClass:"muted-title"},[e._v("\n\t\t\t"+e._s(e.__("Frequently Visited Links"))+"\n\t\t")]),e._v(" "),n("div",{staticClass:"flex flex-column"},e._l(e.frequently_visited_list,function(t){return n("a",{key:t.route,staticClass:"route-link",on:{click:function(n){return n.preventDefault(),e.goto_list(t.route)}}},[e._v("\n\t\t\t\t"+e._s(e.get_label(t.route))+"\n\t\t\t")])}),0)]):e._e()])};_._withStripped=!0;var v=function(e,t,n,a,i,s,o,r){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/PostSidebar.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=a,t&&(d=function(e){t.call(this,o(e))}),void 0!==d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return l}({render:_,staticRenderFns:[]},function(e){e&&e("data-v-dfd64e0a_0",{source:".route-link[data-v-dfd64e0a] {\n  margin: 0px 10px 10px 0;\n  text-transform: capitalize;\n}\n.leaderboard-link[data-v-dfd64e0a] {\n  margin: 0px 10px 10px 0;\n  text-transform: capitalize;\n  margin-bottom: 15px;\n}\n.stats[data-v-dfd64e0a] {\n  min-height: 150px;\n}\n.user-details .user-avatar[data-v-dfd64e0a] .avatar-xl {\n  height: 150px;\n  width: 150px;\n}\n.user-details .user_name[data-v-dfd64e0a] {\n  display: block;\n  margin-top: 10px;\n  font-size: 2rem;\n  font-weight: 600;\n}\n",map:{version:3,sources:["PostSidebar.vue"],names:[],mappings:"AAAA;EACE,uBAAuB;EACvB,0BAA0B;AAC5B;AACA;EACE,uBAAuB;EACvB,0BAA0B;EAC1B,mBAAmB;AACrB;AACA;EACE,iBAAiB;AACnB;AACA;EACE,aAAa;EACb,YAAY;AACd;AACA;EACE,cAAc;EACd,gBAAgB;EAChB,eAAe;EACf,gBAAgB;AAClB",file:"PostSidebar.vue",sourcesContent:[".route-link {\n  margin: 0px 10px 10px 0;\n  text-transform: capitalize;\n}\n.leaderboard-link {\n  margin: 0px 10px 10px 0;\n  text-transform: capitalize;\n  margin-bottom: 15px;\n}\n.stats {\n  min-height: 150px;\n}\n.user-details .user-avatar /deep/ .avatar-xl {\n  height: 150px;\n  width: 150px;\n}\n.user-details .user_name {\n  display: block;\n  margin-top: 10px;\n  font-size: 2rem;\n  font-weight: 600;\n}\n"]},media:void 0})},m,"data-v-dfd64e0a",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=a?i.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=i.source,d=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),a&&(l.setAttribute("data-group",s),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(a&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var p=document.createTextNode(r),c=o.element.childNodes;c[d]&&o.element.removeChild(c[d]),c.length?o.element.insertBefore(p,c[d]):o.element.appendChild(p)}}}}}),h={data:function(){return{events:[]}},created:function(){var e=this;this.get_events().then(function(t){e.events=t})},methods:{get_events:function(){var e=frappe.datetime.now_date();return frappe.xcall("frappe.desk.doctype.event.event.get_events",{start:e,end:e})},open_chat:function(){setTimeout(frappe.chat.widget.toggle)},get_time:function(e){return frappe.datetime.get_time(e)},open_event:function(e){frappe.set_route("Form","Event",e.name)}}},g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"muted-title"},[e._v(e._s(e.__("Upcoming Events")))]),e._v(" "),e._l(e.events,function(t){return n("div",{key:t.name,staticClass:"event"},[n("span",{staticClass:"bold"},[e._v(e._s(e.get_time(t.starts_on)))]),e._v(" "),n("a",{on:{click:function(n){return e.open_event(t)}}},[e._v(" "+e._s(t.subject))])])}),e._v(" "),e.events.length?e._e():n("div",{staticClass:"event"},[e._v("\n\t\t"+e._s(e.__("No Upcoming Events"))+"\n\t")]),e._v(" "),n("div",{staticClass:"muted-title"},[e._v(e._s(e.__("Chat")))]),e._v(" "),n("a",{on:{click:e.open_chat}},[e._v("\n\t\t"+e._s(e.__("Open Chat"))+"\n\t")])],2)};g._withStripped=!0;var b=function(e,t,n,a,i,s,o,r){var d=("function"==typeof n?n.options:n)||{};return d.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/ActivitySidebar.vue",d.render||(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),d._scopeId=a,d}({render:g,staticRenderFns:[]},0,h,void 0,!1),C={components:{PostLoader:f,PostSidebar:v,ActivitySidebar:b},data:function(){return{posts:[],events:[],new_posts_count:0}},created:function(){var e=this;frappe.realtime.on("new_post",function(t){t===frappe.session.user?e.load_new_posts():e.new_posts_count+=1})},methods:{load_new_posts:function(){this.$emit("load_new_posts"),this.new_posts_count=0}}},x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wall-container"},[n("post-sidebar",{staticClass:"post-sidebar hidden-xs"}),e._v(" "),n("div",{staticClass:"post-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.new_posts_count,expression:"new_posts_count"}],staticClass:"new_posts_count",on:{click:e.load_new_posts}},[e._v("\n\t\t\t"+e._s(e.new_posts_count+" new post")+"\n\t\t")]),e._v(" "),n("post-loader",{attrs:{post_list_filter:{}}})],1),e._v(" "),n("activity-sidebar",{staticClass:"activity-sidebar hidden-xs"})],1)};x._withStripped=!0;var y=function(e,t,n,a,i,s,o,r){var d=("function"==typeof n?n.options:n)||{};return d.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/pages/Wall.vue",d.render||(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),d._scopeId=a,d}({render:x,staticRenderFns:[]},0,C,void 0,!1),E={props:{user_id:String},data:function(){return{user:frappe.user_info(this.user_id),can_edit_profile:frappe.social.is_session_user_page(),can_edit_user:frappe.session.user===this.user_id,energy_points:0}},mounted:function(){var e=this;frappe.xcall("frappe.social.doctype.energy_point_log.energy_point_log.get_user_energy_and_review_points",{user:this.user_id}).then(function(t){e.energy_points=t[e.user_id].energy_points})},methods:{edit_user:function(){frappe.set_route("Form","User",this.user_id)},edit_profile:function(){var e=this,t=new frappe.ui.Dialog({title:__("Edit Profile"),fields:[{fieldtype:"Attach Image",fieldname:"user_image",label:"Profile Image"},{fieldtype:"Data",fieldname:"interest",label:"Interests"},{fieldtype:"Column Break"},{fieldtype:"Attach Image",fieldname:"banner_image",label:"Banner Image"},{fieldtype:"Data",fieldname:"location",label:"Location"},{fieldtype:"Section Break",fieldname:"Interest"},{fieldtype:"Small Text",fieldname:"bio",label:"Bio"}],primary_action:function(n){t.disable_primary_action(),frappe.xcall("frappe.core.doctype.user.user.update_profile_info",{profile_info:n}).then(function(n){n.image=n.user_image;var a=frappe.user_info(e.user_id);e.user=Object.assign(a,n),e.$root.$emit("user_image_updated"),t.hide()}).finally(function(){t.enable_primary_action()})},primary_action_label:__("Save")});t.set_values({user_image:this.user.image,banner_image:this.user.banner_image,location:this.user.location,interest:this.user.interest,bio:this.user.bio}),t.show()},view_energy_point_list:function(e){frappe.set_route("List","Energy Point Log",{user:e.name})}}},B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile-sidebar flex flex-column"},[n("div",{staticClass:"user-details"},[n("h3",[e._v(e._s(e.user.fullname))]),e._v(" "),n("p",[n("a",{staticClass:"text-muted",on:{click:function(t){return e.view_energy_point_list(e.user)}}},[e._v("\n\t\t\t"+e._s(e.__("Energy Points"))+": "+e._s(e.energy_points))])]),e._v(" "),n("p",[e._v(e._s(e.user.bio))]),e._v(" "),e.user.location?n("div",{staticClass:"location"},[n("span",{staticClass:"text-muted"},[n("i",{staticClass:"fa fa-map-marker"},[e._v(" ")]),e._v("\n\t\t\t\t"+e._s(e.user.location)+"\n\t\t\t")])]):e._e(),e._v(" "),e.user.interest?n("div",{staticClass:"interest"},[n("span",{staticClass:"text-muted"},[n("i",{staticClass:"fa fa-puzzle-piece"},[e._v(" ")]),e._v("\n\t\t\t\t"+e._s(e.user.interest)+"\n\t\t\t")])]):e._e()]),e._v(" "),e.can_edit_profile?n("a",{staticClass:"edit-profile-link",on:{click:function(t){return e.edit_profile()}}},[e._v(e._s(e.__("Edit Profile")))]):e._e(),e._v(" "),e.can_edit_user?n("a",{staticClass:"edit-profile-link",on:{click:function(t){return e.edit_user()}}},[e._v(e._s(e.__("User Settings")))]):e._e()])};B._withStripped=!0;var k=function(e,t,n,a,i,s,o,r){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/ProfileSidebar.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=a,t&&(d=function(e){t.call(this,o(e))}),void 0!==d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return l}({render:B,staticRenderFns:[]},function(e){e&&e("data-v-b3d33df4_0",{source:".profile-sidebar[data-v-b3d33df4] {\n  padding: 10px 10px 0 0;\n}\n.user-details[data-v-b3d33df4] {\n  min-height: 150px;\n}\n.user-details .location[data-v-b3d33df4],\n.user-details .interest[data-v-b3d33df4] {\n  margin-bottom: 10px;\n}\n.user-details .location i[data-v-b3d33df4],\n.user-details .interest i[data-v-b3d33df4] {\n  width: 15px;\n}\n.edit-profile-link[data-v-b3d33df4] {\n  margin-top: 15px;\n}\n",map:{version:3,sources:["ProfileSidebar.vue"],names:[],mappings:"AAAA;EACE,sBAAsB;AACxB;AACA;EACE,iBAAiB;AACnB;AACA;;EAEE,mBAAmB;AACrB;AACA;;EAEE,WAAW;AACb;AACA;EACE,gBAAgB;AAClB",file:"ProfileSidebar.vue",sourcesContent:[".profile-sidebar {\n  padding: 10px 10px 0 0;\n}\n.user-details {\n  min-height: 150px;\n}\n.user-details .location,\n.user-details .interest {\n  margin-bottom: 10px;\n}\n.user-details .location i,\n.user-details .interest i {\n  width: 15px;\n}\n.edit-profile-link {\n  margin-top: 15px;\n}\n"]},media:void 0})},E,"data-v-b3d33df4",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=a?i.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=i.source,d=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),a&&(l.setAttribute("data-group",s),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(a&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var p=document.createTextNode(r),c=o.element.childNodes;c[d]&&o.element.removeChild(c[d]),c.length?o.element.insertBefore(p,c[d]):o.element.appendChild(p)}}}}}),w={props:["user_id"],data:function(){return{user_avatar:frappe.avatar(this.user_id,"avatar-xl"),user_banner:frappe.user_info(this.user_id).banner_image}},created:function(){var e=this;this.$root.$on("user_image_updated",function(){e.user_avatar=frappe.avatar(e.user_id,"avatar-xl"),e.user_banner=frappe.user_info(e.user_id).banner_image})},computed:{background_style:function(){var e={};return this.user_banner&&(e["background-image"]="url('"+this.user_banner+"')"),e}}},S=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"banner",staticClass:"banner",style:this.background_style},[t("div",{staticClass:"user-avatar container",domProps:{innerHTML:this._s(this.user_avatar)}})])};S._withStripped=!0;var P={props:["user_id"],components:{PostLoader:f,ProfileSidebar:k,ProfileBanner:function(e,t,n,a,i,s,o,r){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/ProfileBanner.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=a,t&&(d=function(e){t.call(this,o(e))}),void 0!==d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return l}({render:S,staticRenderFns:[]},function(e){e&&e("data-v-c790e1ea_0",{source:".banner[data-v-c790e1ea] {\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 300px;\n  z-index: 101;\n  position: absolute;\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-color: #262626;\n}\n.banner .user-avatar[data-v-c790e1ea] {\n  position: relative;\n}\n.banner .user-avatar[data-v-c790e1ea] .avatar {\n  top: 220px;\n  left: 10px;\n  width: 150px;\n  height: 150px;\n  border-radius: 4px;\n  background: white;\n  position: absolute !important;\n}\n.banner .editable-image[data-v-c790e1ea] .avatar {\n  cursor: pointer;\n}\n.banner .editable-image[data-v-c790e1ea] .avatar :hover {\n  opacity: 0.9;\n}\n",map:{version:3,sources:["ProfileBanner.vue"],names:[],mappings:"AAAA;EACE,MAAM;EACN,OAAO;EACP,WAAW;EACX,aAAa;EACb,YAAY;EACZ,kBAAkB;EAClB,sBAAsB;EACtB,2BAA2B;EAC3B,4BAA4B;EAC5B,yBAAyB;AAC3B;AACA;EACE,kBAAkB;AACpB;AACA;EACE,UAAU;EACV,UAAU;EACV,YAAY;EACZ,aAAa;EACb,kBAAkB;EAClB,iBAAiB;EACjB,6BAA6B;AAC/B;AACA;EACE,eAAe;AACjB;AACA;EACE,YAAY;AACd",file:"ProfileBanner.vue",sourcesContent:[".banner {\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 300px;\n  z-index: 101;\n  position: absolute;\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-color: #262626;\n}\n.banner .user-avatar {\n  position: relative;\n}\n.banner .user-avatar /deep/ .avatar {\n  top: 220px;\n  left: 10px;\n  width: 150px;\n  height: 150px;\n  border-radius: 4px;\n  background: white;\n  position: absolute !important;\n}\n.banner .editable-image /deep/ .avatar {\n  cursor: pointer;\n}\n.banner .editable-image /deep/ .avatar :hover {\n  opacity: 0.9;\n}\n"]},media:void 0})},w,"data-v-c790e1ea",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=a?i.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=i.source,d=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),a&&(l.setAttribute("data-group",s),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(a&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var p=document.createTextNode(r),c=o.element.childNodes;c[d]&&o.element.removeChild(c[d]),c.length?o.element.insertBefore(p,c[d]):o.element.appendChild(p)}}}}}),ActivitySidebar:b},data:function(){return{show_list:"user_posts",post_list_filter:null,user_posts_count:0,liked_posts_count:0}},watch:{show_list:function(){"user_posts"==this.show_list?this.post_list_filter=this.get_user_posts_filter():"liked_posts"==this.show_list&&(this.post_list_filter=this.get_liked_posts_filter())}},created:function(){this.post_list_filter=this.get_user_posts_filter(),this.set_post_count()},methods:{get_user_posts_filter:function(){return{owner:this.user_id}},get_liked_posts_filter:function(){return{liked_by:["like","%"+this.user_id+"%"]}},set_post_count:function(){var e=this;frappe.db.count("Post",{filters:this.get_user_posts_filter()}).then(function(t){return e.user_posts_count=t}),frappe.db.count("Post",{filters:this.get_liked_posts_filter()}).then(function(t){return e.liked_posts_count=t})}}},F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"profile-head"},[n("profile-banner",{attrs:{user_id:e.user_id}})],1),e._v(" "),n("div",{staticClass:"profile-container"},[n("profile-sidebar",{staticClass:"profile-sidebar",attrs:{user_id:e.user_id}}),e._v(" "),n("div",{staticClass:"post-container"},[n("div",{staticClass:"list-options"},[n("div",{staticClass:"option",class:{bold:"user_posts"===e.show_list},on:{click:function(t){e.show_list="user_posts"}}},[n("span",[e._v(e._s(e.__("Posts")))]),e._v(" "),n("span",[e._v("("+e._s(e.user_posts_count)+")")])]),e._v(" "),n("div",{staticClass:"option",class:{bold:"liked_posts"===e.show_list},on:{click:function(t){e.show_list="liked_posts"}}},[n("span",[e._v(e._s(e.__("Likes")))]),e._v(" "),n("span",[e._v("("+e._s(e.liked_posts_count)+")")])])]),e._v(" "),n("post-loader",{attrs:{post_list_filter:e.post_list_filter}})],1),e._v(" "),n("activity-sidebar",{staticClass:"activity-sidebar hidden-xs"})],1)])};F._withStripped=!0;var z=function(e,t,n,a,i,s,o,r){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/pages/Profile.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=a,t&&(d=function(e){t.call(this,o(e))}),void 0!==d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return l}({render:F,staticRenderFns:[]},function(e){e&&e("data-v-9ce5391a_0",{source:".profile-head[data-v-9ce5391a] {\n  height: 190px;\n}\n.profile-sidebar[data-v-9ce5391a] {\n  margin-top: 60px;\n  flex: 20%;\n}\n.right-sidebar[data-v-9ce5391a] {\n  margin-top: 5px;\n}\n.list-options[data-v-9ce5391a] {\n  display: flex;\n}\n.list-options .option[data-v-9ce5391a] {\n  cursor: pointer;\n  padding: 0px 10px 10px 0;\n}\n",map:{version:3,sources:["Profile.vue"],names:[],mappings:"AAAA;EACE,aAAa;AACf;AACA;EACE,gBAAgB;EAChB,SAAS;AACX;AACA;EACE,eAAe;AACjB;AACA;EACE,aAAa;AACf;AACA;EACE,eAAe;EACf,wBAAwB;AAC1B",file:"Profile.vue",sourcesContent:[".profile-head {\n  height: 190px;\n}\n.profile-sidebar {\n  margin-top: 60px;\n  flex: 20%;\n}\n.right-sidebar {\n  margin-top: 5px;\n}\n.list-options {\n  display: flex;\n}\n.list-options .option {\n  cursor: pointer;\n  padding: 0px 10px 10px 0;\n}\n"]},media:void 0})},P,"data-v-9ce5391a",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=a?i.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=i.source,d=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),a&&(l.setAttribute("data-group",s),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(a&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var p=document.createTextNode(r),c=o.element.childNodes;c[d]&&o.element.removeChild(c[d]),c.length?o.element.insertBefore(p,c[d]):o.element.appendChild(p)}}}}}),T={data:function(){return{users:[],filter_users_by:null,sort_users_by:"energy_points",sort_order:"desc",show_log_for:null,period_options:["Lifetime","This Month","This Week","Today"],period:"This Month"}},computed:{from_date:function(){return"This Month"===this.period?frappe.datetime.month_start():"This Week"===this.period?frappe.datetime.week_start():"Today"===this.period?frappe.datetime.get_today():null},filtered_users:function(){var e=this,t=this.users.slice();return this.filter_users_by&&(t=t.filter(function(t){return t.fullname.toLowerCase().includes(e.filter_users_by.toLowerCase())})),this.sort_users_by&&t.sort(function(t,n){var a=t[e.sort_users_by],i=n[e.sort_users_by],s=0;return a>i&&(s=1),a<i&&(s=-1),"desc"===e.sort_order&&(s=-s),s}),t}},watch:{period:function(){this.fetch_users_energy_points_and_update_users()}},mounted:function(){$('[data-toggle="tooltip"]').tooltip()},created:function(){var e=this;this.users=frappe.boot.user_info,["Administrator","Guest","guest@example.com"].forEach(function(t){return delete e.users[t]}),this.users=Object.values(this.users),this.fetch_users_energy_points_and_update_users(),frappe.realtime.on("update_points",function(){e.fetch_users_energy_points_and_update_users()})},methods:{get_avatar:function(e){return frappe.avatar(e,"avatar-medium")},go_to_profile_page:function(e){frappe.set_route("social","profile",e)},fetch_users_energy_points_and_update_users:function(){var e=this;frappe.xcall("frappe.social.doctype.energy_point_log.energy_point_log.get_user_energy_and_review_points",{from_date:this.from_date}).then(function(t){var n=e.users.slice();e.users=n.map(function(e){var n=t[e.name]||{};return e.energy_points=n.energy_points||0,e.review_points=n.review_points||0,e.given_points=n.given_points||0,e})})},toggle_log:function(e){frappe.set_route("List","Energy Point Log",{user:e})}}},j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-list-container"},[n("ul",{staticClass:"list-unstyled user-list"},[n("li",{staticClass:"user-card user-list-header text-medium"},[n("span",{staticClass:"rank-column"}),e._v(" "),n("span",{staticClass:"user-details text-muted"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.filter_users_by,expression:"filter_users_by"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search User"},domProps:{value:e.filter_users_by},on:{input:function(t){t.target.composing||(e.filter_users_by=t.target.value)}}})]),e._v(" "),n("span",{staticClass:"flex-40"}),e._v(" "),n("span",{staticClass:"flex-20 text-muted"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.period,expression:"period"}],staticClass:"form-control",attrs:{"data-toggle":"tooltip",title:"Period"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.period=t.target.multiple?n:n[0]}}},e._l(e.period_options,function(t){return n("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0)])]),e._v(" "),n("li",{staticClass:"user-card user-list-header text-medium"},[n("span",{staticClass:"rank-column"},[e._v("#")]),e._v(" "),n("span",{staticClass:"user-details text-muted"},[e._v(e._s(e.__("User")))]),e._v(" "),e._l(["Energy Points","Review Points","Points Given"],function(t){return n("span",{key:t,staticClass:"flex-20 text-muted"},[e._v(e._s(e.__(t)))])})],2),e._v(" "),e._l(e.filtered_users,function(t,a){return n("li",{key:t.name},[n("div",{staticClass:"user-card"},[n("span",{staticClass:"user-details flex",on:{click:function(n){return e.go_to_profile_page(t.name)}}},[n("span",{staticClass:"rank-column"},[e._v(e._s(a+1))]),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.get_avatar(t.name))}}),e._v(" "),n("span",[e._v("\n\t\t\t\t\t\t"+e._s(t.fullname)+"\n\t\t\t\t\t\t"),n("div",{staticClass:"text-muted text-medium",class:{italic:!t.bio}},[e._v(e._s(e.frappe.ellipsis(t.bio,100)||"No Bio"))])])]),e._v(" "),e._l(["energy_points","review_points","given_points"],function(a){return n("span",{key:a,staticClass:"text-muted text-nowrap flex-20",on:{click:function(n){return e.toggle_log(t.name)}}},[e._v(e._s(t[a]))])})],2),e._v(" "),n("energy-point-history",{directives:[{name:"show",rawName:"v-show",value:e.show_log_for===t.name,expression:"show_log_for===user.name"}],key:t.name+t.energy_points,staticClass:"energy-point-history",attrs:{user:t.name,from_date:e.from_date}})],1)}),e._v(" "),e.filtered_users.length?e._e():n("li",{staticClass:"user-card text-muted"},[e._v(e._s(e.__("No user found")))])],2)])};j._withStripped=!0;var q=function(e,t,n,a,i,s,o,r){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/pages/UserList.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=a,t&&(d=function(e){t.call(this,o(e))}),void 0!==d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return l}({render:j,staticRenderFns:[]},function(e){e&&e("data-v-e6da5ab6_0",{source:'/* palette colors*/\n/* the element that this class is applied to, should have a max width for this to work*/\nbody[data-v-e6da5ab6] {\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;\n}\na[data-v-e6da5ab6] {\n  cursor: pointer;\n}\na[data-v-e6da5ab6],\na[data-v-e6da5ab6]:hover,\na[data-v-e6da5ab6]:active,\na[data-v-e6da5ab6]:focus,\n.btn[data-v-e6da5ab6],\n.btn[data-v-e6da5ab6]:hover,\n.btn[data-v-e6da5ab6]:active,\n.btn[data-v-e6da5ab6]:focus {\n  outline: 0;\n}\nimg[data-v-e6da5ab6] {\n  max-width: 100%;\n}\np[data-v-e6da5ab6] {\n  margin: 10px 0;\n}\n.text-color[data-v-e6da5ab6] {\n  color: #36414c !important;\n}\n.text-muted[data-v-e6da5ab6] {\n  color: #8D99A6 !important;\n}\n.text-extra-muted[data-v-e6da5ab6] {\n  color: #d1d8dd !important;\n}\na[data-v-e6da5ab6],\n.badge[data-v-e6da5ab6] {\n  -webkit-transition: 0.2s;\n  -o-transition: 0.2s;\n  transition: 0.2s;\n}\n.btn[data-v-e6da5ab6] {\n  -webkit-transition: background-color 0.2s;\n  -o-transition: background-color 0.2s;\n  transition: background-color 0.2s;\n}\na.disabled[data-v-e6da5ab6],\na.disabled[data-v-e6da5ab6]:hover {\n  color: #888;\n  cursor: default;\n  text-decoration: none;\n}\na.grey[data-v-e6da5ab6],\n.sidebar-section a[data-v-e6da5ab6],\n.control-value a[data-v-e6da5ab6],\n.data-row a[data-v-e6da5ab6] {\n  text-decoration: none;\n}\na.grey[data-v-e6da5ab6]:hover,\n.sidebar-section a[data-v-e6da5ab6]:hover,\n.control-value a[data-v-e6da5ab6]:hover,\n.data-row a[data-v-e6da5ab6]:hover,\na.grey[data-v-e6da5ab6]:focus,\n.sidebar-section a[data-v-e6da5ab6]:focus,\n.control-value a[data-v-e6da5ab6]:focus,\n.data-row a[data-v-e6da5ab6]:focus {\n  text-decoration: underline;\n}\na.text-muted[data-v-e6da5ab6],\na.text-extra-muted[data-v-e6da5ab6] {\n  text-decoration: none;\n}\n.underline[data-v-e6da5ab6] {\n  text-decoration: underline;\n}\n.inline-block[data-v-e6da5ab6] {\n  display: inline-block;\n}\n.bold[data-v-e6da5ab6],\n.strong[data-v-e6da5ab6] {\n  font-weight: bold;\n}\nkbd[data-v-e6da5ab6] {\n  color: inherit;\n  background-color: #f0f4f7;\n}\n.btn [class^="fa fa-"][data-v-e6da5ab6],\n.nav [class^="fa fa-"][data-v-e6da5ab6],\n.btn [class*="fa fa-"][data-v-e6da5ab6],\n.nav [class*="fa fa-"][data-v-e6da5ab6] {\n  display: inline-block;\n}\n/* dropdowns */\n.dropdown-backdrop[data-v-e6da5ab6] {\n  display: none;\n}\n.dropdown-menu > li > a[data-v-e6da5ab6] {\n  padding: 14px;\n  white-space: normal;\n}\n.dropdown-menu[data-v-e6da5ab6] {\n  min-width: 200px;\n  padding: 0px;\n  font-size: 12px;\n  max-height: 500px;\n  overflow: auto;\n  border-radius: 0px 0px 4px 4px;\n}\n.dropdown-menu .dropdown-header[data-v-e6da5ab6] {\n  padding: 3px 14px;\n  font-size: 11px;\n  font-weight: 200;\n  padding-top: 12px;\n}\n.dropdown-menu .divider[data-v-e6da5ab6] {\n  margin: 0px;\n}\na.badge-hover:hover .badge[data-v-e6da5ab6],\na.badge-hover:focus .badge[data-v-e6da5ab6],\na.badge-hover:active .badge[data-v-e6da5ab6] {\n  background-color: #d8dfe5;\n}\n.msgprint-dialog[data-v-e6da5ab6] {\n  max-width: 400px;\n}\n.msgprint-dialog .modal-content[data-v-e6da5ab6] {\n  min-height: 110px;\n}\n.msgprint[data-v-e6da5ab6] {\n  word-wrap: break-word;\n}\n.msgprint pre[data-v-e6da5ab6] {\n  text-align: left;\n}\n.msgprint a[data-v-e6da5ab6]:not(.btn) {\n  text-decoration: underline;\n}\n.centered[data-v-e6da5ab6] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  -webkit-transform: translate(-50%, -50%);\n}\n.border-top[data-v-e6da5ab6] {\n  border-top: 1px solid #d1d8dd;\n}\n.border-bottom[data-v-e6da5ab6] {\n  border-bottom: 1px solid #d1d8dd;\n}\n.border-left[data-v-e6da5ab6] {\n  border-left: 1px solid #d1d8dd;\n}\n.border-right[data-v-e6da5ab6] {\n  border-right: 1px solid #d1d8dd;\n}\n.border[data-v-e6da5ab6] {\n  border: 1px solid #d1d8dd;\n}\n.rounded[data-v-e6da5ab6] {\n  border-radius: 4px;\n}\n.close-inline[data-v-e6da5ab6] {\n  font-size: 120%;\n  font-weight: bold;\n  line-height: 1;\n  cursor: pointer;\n  color: inherit;\n  display: inline-block;\n}\n.close-inline[data-v-e6da5ab6]:hover,\n.close-inline[data-v-e6da5ab6]:focus {\n  text-decoration: none;\n}\n.middle[data-v-e6da5ab6] {\n  vertical-align: middle;\n}\n.full-center-container[data-v-e6da5ab6] {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.full-center[data-v-e6da5ab6] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  transform: translate(-50%, -50%);\n  -webkit-transform: translate(-50%, -50%);\n}\n#freeze[data-v-e6da5ab6] {\n  z-index: 1020;\n  bottom: 0;\n  opacity: 0;\n  background-color: #fafbfc;\n}\n#freeze .freeze-message-container[data-v-e6da5ab6] {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n#freeze .freeze-message[data-v-e6da5ab6] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  transform: translate(-50%, -50%);\n  -webkit-transform: translate(-50%, -50%);\n  text-align: center;\n  color: #36414c !important;\n}\n#freeze.dark[data-v-e6da5ab6] {\n  background-color: #334143;\n}\n#freeze.in[data-v-e6da5ab6] {\n  opacity: 0.5;\n}\na.no-decoration[data-v-e6da5ab6] {\n  text-decoration: none;\n  color: inherit;\n}\na.no-decoration[data-v-e6da5ab6]:hover,\na.no-decoration[data-v-e6da5ab6]:focus,\na.no-decoration[data-v-e6da5ab6]:active {\n  text-decoration: none;\n  color: inherit;\n}\n.padding[data-v-e6da5ab6] {\n  padding: 15px;\n}\n.margin[data-v-e6da5ab6] {\n  margin: 15px;\n}\n.margin-top[data-v-e6da5ab6] {\n  margin-top: 15px;\n}\n.margin-bottom[data-v-e6da5ab6] {\n  margin-bottom: 15px;\n}\n.margin-left[data-v-e6da5ab6] {\n  margin-left: 15px;\n}\n.margin-right[data-v-e6da5ab6] {\n  margin-right: 15px;\n}\n@media (max-width: 767px) {\n.text-center-xs[data-v-e6da5ab6] {\n    text-align: center;\n}\n}\n.grayscale[data-v-e6da5ab6] {\n  -webkit-filter: grayscale(100%);\n  filter: grayscale(100%);\n}\n.uppercase[data-v-e6da5ab6] {\n  padding-bottom: 4px;\n  text-transform: uppercase;\n  font-size: 12px;\n  letter-spacing: 0.4px;\n  color: #8d99a6;\n}\n.ellipsis[data-v-e6da5ab6] {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 100%;\n  vertical-align: middle;\n}\n/* Given that the element that text-ellipsis is applied to,\n\tshould have a max width for it to work */\n.ellipsis-width[data-v-e6da5ab6] {\n  max-width: 200px;\n}\n/* Font size utilities */\n.text-regular[data-v-e6da5ab6] {\n  font-size: 14px;\n}\n.text-medium[data-v-e6da5ab6] {\n  font-size: 12px;\n}\n.text-small[data-v-e6da5ab6] {\n  font-size: 10px;\n}\n.text-large[data-v-e6da5ab6] {\n  font-size: 16px;\n}\n.disable-click[data-v-e6da5ab6] {\n  pointer-events: none;\n}\n.popover-title[data-v-e6da5ab6] {\n  display: none;\n}\n.user-list[data-v-e6da5ab6] {\n  border-left: 1px solid #d1d8dd;\n  border-right: 1px solid #d1d8dd;\n}\n.user-list .user-card[data-v-e6da5ab6] {\n  display: flex;\n  cursor: pointer;\n  padding: 12px 15px;\n  border-bottom: 1px solid #d1d8dd;\n}\n.user-list .user-card .user-details[data-v-e6da5ab6] {\n  flex: 1;\n}\n.user-list .user-card .user-details .italic[data-v-e6da5ab6] {\n  font-style: italic;\n}\n.rank-column[data-v-e6da5ab6] {\n  flex: 0 0 30px;\n  align-self: center;\n  color: #8D99A6 !important;\n}\n.flex-20[data-v-e6da5ab6] {\n  flex: 0 0 20%;\n  text-align: right;\n  align-self: center;\n}\n.flex-40[data-v-e6da5ab6] {\n  flex: 0 0 40%;\n}\n.user-list-header[data-v-e6da5ab6] {\n  background-color: #fafbfc;\n}\n.search-bar[data-v-e6da5ab6] {\n  position: sticky;\n  top: 0;\n  background: white;\n  height: 75px;\n  text-align: center;\n  width: 100%;\n  left: 0;\n}\n.search-bar div[data-v-e6da5ab6] {\n  margin: auto;\n}\n.energy-point-history[data-v-e6da5ab6] {\n  border-bottom: 1px solid #d1d8dd;\n  background-color: #fafbfc;\n}\n',map:{version:3,sources:["UserList.vue","/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/pages/UserList.vue"],names:[],mappings:"AAAA,kBAAkB;AAClB,uFAAuF;AACvF;EACE,8JAA8J;AAChK;AACA;EACE,eAAe;AACjB;AACA;;;;;;;;EAQE,UAAU;AACZ;AACA;EACE,eAAe;AACjB;AACA;EACE,cAAc;AAChB;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,yBAAyB;AAC3B;AACA;;EAEE,wBAAwB;EACxB,mBAAmB;EACnB,gBAAgB;AAClB;AACA;EACE,yCAAyC;EACzC,oCAAoC;EACpC,iCAAiC;AACnC;AACA;;EAEE,WAAW;EACX,eAAe;EACf,qBAAqB;AACvB;AACA;;;;EAIE,qBAAqB;AACvB;AACA;;;;;;;;EAQE,0BAA0B;AAC5B;AACA;;EAEE,qBAAqB;AACvB;AACA;EACE,0BAA0B;AAC5B;AACA;EACE,qBAAqB;AACvB;AACA;;EAEE,iBAAiB;AACnB;AACA;EACE,cAAc;EACd,yBAAyB;AAC3B;AACA;;;;EAIE,qBAAqB;AACvB;AACA,cAAc;AACd;EACE,aAAa;AACf;AACA;EACE,aAAa;EACb,mBAAmB;AACrB;AACA;EACE,gBAAgB;EAChB,YAAY;EACZ,eAAe;EACf,iBAAiB;EACjB,cAAc;EACd,8BAA8B;AAChC;AACA;EACE,iBAAiB;EACjB,eAAe;EACf,gBAAgB;EAChB,iBAAiB;AACnB;AACA;EACE,WAAW;AACb;AACA;;;EAGE,yBAAyB;AAC3B;AACA;EACE,gBAAgB;AAClB;AACA;EACE,iBAAiB;AACnB;AACA;EACE,qBAAqB;AACvB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,0BAA0B;AAC5B;AACA;EACE,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,gCAAgC;EAChC,wCAAwC;AAC1C;AACA;EACE,6BAA6B;AAC/B;AACA;EACE,gCAAgC;AAClC;AACA;EACE,8BAA8B;AAChC;AACA;EACE,+BAA+B;AACjC;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,kBAAkB;AACpB;AACA;EACE,eAAe;EACf,iBAAiB;EACjB,cAAc;EACd,eAAe;EACf,cAAc;EACd,qBAAqB;AACvB;AACA;;EAEE,qBAAqB;AACvB;AACA;ECCA,sBAAA;AACA;AACA;EACA,kBAAA;EACA,MAAA;EACA,SAAA;EACA,OAAA;EACA,QAAA;AACA;AACA;EACA,kBAAA;EACA,QAAA;EACA,SAAA;EACA,WAAA;EACA,gCAAA;EACA,wCAAA;AACA;AACA;EACA,aAAA;EACA,SAAA;EACA,UAAA;EACA,yBAAA;AACA;AACA;EACA,kBAAA;EACA,MAAA;EACA,SAAA;EACA,OAAA;EACA,QAAA;AACA;AACA;EACA,kBAAA;EACA,QAAA;EACA,SAAA;EACA,WAAA;EACA,gCAAA;EACA,wCAAA;EACA,kBAAA;EACA,yBAAA;AACA;AACA;EACA,yBAAA;AACA;AACA;EACA,YAAA;AACA;AACA;EACA,qBAAA;EACA,cAAA;ADCA;AACA;;;EAGE,qBAAqB;EACrB,cAAc;AAChB;AACA;EACE,aAAa;AACf;AACA;EACE,YAAY;AACd;AACA;EACE,gBAAgB;AAClB;AACA;EACE,mBAAmB;AACrB;AACA;EACE,iBAAiB;AACnB;AACA;EACE,kBAAkB;AACpB;AACA;AACE;IACE,kBAAkB;AACpB;AACF;AACA;EACE,+BAA+B;EAC/B,uBAAuB;AACzB;AACA;EACE,mBAAmB;EACnB,yBAAyB;EACzB,eAAe;EACf,qBAAqB;EACrB,cAAc;AAChB;AACA;EACE,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;EACvB,eAAe;EACf,sBAAsB;AACxB;AACA;yCACyC;AACzC;EACE,gBAAgB;AAClB;AACA,wBAAwB;AACxB;EACE,eAAe;AACjB;AACA;EACE,eAAe;AACjB;AACA;EACE,eAAe;AACjB;AACA;EACE,eAAe;AACjB;AACA;EACE,oBAAoB;AACtB;AACA;EACE,aAAa;AACf;AACA;EACE,8BAA8B;EAC9B,+BAA+B;AACjC;AACA;EACE,aAAa;EACb,eAAe;EACf,kBAAkB;EAClB,gCAAgC;AAClC;AACA;EACE,OAAO;AACT;AACA;EACE,kBAAkB;AACpB;AACA;EACE,cAAc;EACd,kBAAkB;EAClB,yBAAyB;AAC3B;AACA;EACE,aAAa;EACb,iBAAiB;EACjB,kBAAkB;AACpB;AACA;EACE,aAAa;AACf;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,gBAAgB;EAChB,MAAM;EACN,iBAAiB;EACjB,YAAY;EACZ,kBAAkB;EAClB,WAAW;EACX,OAAO;AACT;AACA;EACE,YAAY;AACd;AACA;EACE,gCAAgC;EAChC,yBAAyB;AAC3B",file:"UserList.vue",sourcesContent:['/* palette colors*/\n/* the element that this class is applied to, should have a max width for this to work*/\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;\n}\na {\n  cursor: pointer;\n}\na,\na:hover,\na:active,\na:focus,\n.btn,\n.btn:hover,\n.btn:active,\n.btn:focus {\n  outline: 0;\n}\nimg {\n  max-width: 100%;\n}\np {\n  margin: 10px 0;\n}\n.text-color {\n  color: #36414c !important;\n}\n.text-muted {\n  color: #8D99A6 !important;\n}\n.text-extra-muted {\n  color: #d1d8dd !important;\n}\na,\n.badge {\n  -webkit-transition: 0.2s;\n  -o-transition: 0.2s;\n  transition: 0.2s;\n}\n.btn {\n  -webkit-transition: background-color 0.2s;\n  -o-transition: background-color 0.2s;\n  transition: background-color 0.2s;\n}\na.disabled,\na.disabled:hover {\n  color: #888;\n  cursor: default;\n  text-decoration: none;\n}\na.grey,\n.sidebar-section a,\n.control-value a,\n.data-row a {\n  text-decoration: none;\n}\na.grey:hover,\n.sidebar-section a:hover,\n.control-value a:hover,\n.data-row a:hover,\na.grey:focus,\n.sidebar-section a:focus,\n.control-value a:focus,\n.data-row a:focus {\n  text-decoration: underline;\n}\na.text-muted,\na.text-extra-muted {\n  text-decoration: none;\n}\n.underline {\n  text-decoration: underline;\n}\n.inline-block {\n  display: inline-block;\n}\n.bold,\n.strong {\n  font-weight: bold;\n}\nkbd {\n  color: inherit;\n  background-color: #f0f4f7;\n}\n.btn [class^="fa fa-"],\n.nav [class^="fa fa-"],\n.btn [class*="fa fa-"],\n.nav [class*="fa fa-"] {\n  display: inline-block;\n}\n/* dropdowns */\n.dropdown-backdrop {\n  display: none;\n}\n.dropdown-menu > li > a {\n  padding: 14px;\n  white-space: normal;\n}\n.dropdown-menu {\n  min-width: 200px;\n  padding: 0px;\n  font-size: 12px;\n  max-height: 500px;\n  overflow: auto;\n  border-radius: 0px 0px 4px 4px;\n}\n.dropdown-menu .dropdown-header {\n  padding: 3px 14px;\n  font-size: 11px;\n  font-weight: 200;\n  padding-top: 12px;\n}\n.dropdown-menu .divider {\n  margin: 0px;\n}\na.badge-hover:hover .badge,\na.badge-hover:focus .badge,\na.badge-hover:active .badge {\n  background-color: #d8dfe5;\n}\n.msgprint-dialog {\n  max-width: 400px;\n}\n.msgprint-dialog .modal-content {\n  min-height: 110px;\n}\n.msgprint {\n  word-wrap: break-word;\n}\n.msgprint pre {\n  text-align: left;\n}\n.msgprint a:not(.btn) {\n  text-decoration: underline;\n}\n.centered {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  -webkit-transform: translate(-50%, -50%);\n}\n.border-top {\n  border-top: 1px solid #d1d8dd;\n}\n.border-bottom {\n  border-bottom: 1px solid #d1d8dd;\n}\n.border-left {\n  border-left: 1px solid #d1d8dd;\n}\n.border-right {\n  border-right: 1px solid #d1d8dd;\n}\n.border {\n  border: 1px solid #d1d8dd;\n}\n.rounded {\n  border-radius: 4px;\n}\n.close-inline {\n  font-size: 120%;\n  font-weight: bold;\n  line-height: 1;\n  cursor: pointer;\n  color: inherit;\n  display: inline-block;\n}\n.close-inline:hover,\n.close-inline:focus {\n  text-decoration: none;\n}\n.middle {\n  vertical-align: middle;\n}\n.full-center-container {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.full-center {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  transform: translate(-50%, -50%);\n  -webkit-transform: translate(-50%, -50%);\n}\n#freeze {\n  z-index: 1020;\n  bottom: 0;\n  opacity: 0;\n  background-color: #fafbfc;\n}\n#freeze .freeze-message-container {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n#freeze .freeze-message {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  transform: translate(-50%, -50%);\n  -webkit-transform: translate(-50%, -50%);\n  text-align: center;\n  color: #36414c !important;\n}\n#freeze.dark {\n  background-color: #334143;\n}\n#freeze.in {\n  opacity: 0.5;\n}\na.no-decoration {\n  text-decoration: none;\n  color: inherit;\n}\na.no-decoration:hover,\na.no-decoration:focus,\na.no-decoration:active {\n  text-decoration: none;\n  color: inherit;\n}\n.padding {\n  padding: 15px;\n}\n.margin {\n  margin: 15px;\n}\n.margin-top {\n  margin-top: 15px;\n}\n.margin-bottom {\n  margin-bottom: 15px;\n}\n.margin-left {\n  margin-left: 15px;\n}\n.margin-right {\n  margin-right: 15px;\n}\n@media (max-width: 767px) {\n  .text-center-xs {\n    text-align: center;\n  }\n}\n.grayscale {\n  -webkit-filter: grayscale(100%);\n  filter: grayscale(100%);\n}\n.uppercase {\n  padding-bottom: 4px;\n  text-transform: uppercase;\n  font-size: 12px;\n  letter-spacing: 0.4px;\n  color: #8d99a6;\n}\n.ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 100%;\n  vertical-align: middle;\n}\n/* Given that the element that text-ellipsis is applied to,\n\tshould have a max width for it to work */\n.ellipsis-width {\n  max-width: 200px;\n}\n/* Font size utilities */\n.text-regular {\n  font-size: 14px;\n}\n.text-medium {\n  font-size: 12px;\n}\n.text-small {\n  font-size: 10px;\n}\n.text-large {\n  font-size: 16px;\n}\n.disable-click {\n  pointer-events: none;\n}\n.popover-title {\n  display: none;\n}\n.user-list {\n  border-left: 1px solid #d1d8dd;\n  border-right: 1px solid #d1d8dd;\n}\n.user-list .user-card {\n  display: flex;\n  cursor: pointer;\n  padding: 12px 15px;\n  border-bottom: 1px solid #d1d8dd;\n}\n.user-list .user-card .user-details {\n  flex: 1;\n}\n.user-list .user-card .user-details .italic {\n  font-style: italic;\n}\n.rank-column {\n  flex: 0 0 30px;\n  align-self: center;\n  color: #8D99A6 !important;\n}\n.flex-20 {\n  flex: 0 0 20%;\n  text-align: right;\n  align-self: center;\n}\n.flex-40 {\n  flex: 0 0 40%;\n}\n.user-list-header {\n  background-color: #fafbfc;\n}\n.search-bar {\n  position: sticky;\n  top: 0;\n  background: white;\n  height: 75px;\n  text-align: center;\n  width: 100%;\n  left: 0;\n}\n.search-bar div {\n  margin: auto;\n}\n.energy-point-history {\n  border-bottom: 1px solid #d1d8dd;\n  background-color: #fafbfc;\n}\n','<template>\n\t<div class="user-list-container">\n\t\t<ul class="list-unstyled user-list">\n\t\t\t<li class="user-card user-list-header text-medium">\n\t\t\t\t<span class="rank-column"></span>\n\t\t\t\t<span class="user-details text-muted">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass="form-control"\n\t\t\t\t\t\ttype="search"\n\t\t\t\t\t\tplaceholder="Search User"\n\t\t\t\t\t\tv-model="filter_users_by"\n\t\t\t\t\t>\n\t\t\t\t</span>\n\t\t\t\t<span class="flex-40"></span>\n\t\t\t\t<span class="flex-20 text-muted">\n\t\t\t\t\t<select class="form-control" data-toggle="tooltip" title="Period" v-model="period">\n\t\t\t\t\t\t<option v-for="value in period_options" :key="value" :value="value">{{ value }}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class="user-card user-list-header text-medium">\n\t\t\t\t<span class="rank-column">#</span>\n\t\t\t\t<span class="user-details text-muted">{{ __(\'User\') }}</span>\n\t\t\t\t<span\n\t\t\t\t\tclass="flex-20 text-muted"\n\t\t\t\t\tv-for="title in [\'Energy Points\', \'Review Points\', \'Points Given\']"\n\t\t\t\t\t:key="title"\n\t\t\t\t>{{ __(title) }}</span>\n\t\t\t</li>\n\t\t\t<li v-for="(user, index) in filtered_users" :key="user.name">\n\t\t\t\t<div class="user-card">\n\t\t\t\t\t<span class="user-details flex" @click="go_to_profile_page(user.name)">\n\t\t\t\t\t\t<span class="rank-column">{{ index + 1 }}</span>\n\t\t\t\t\t\t<span v-html="get_avatar(user.name)"></span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{ user.fullname }}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass="text-muted text-medium"\n\t\t\t\t\t\t\t\t:class="{\'italic\': !user.bio}"\n\t\t\t\t\t\t\t>{{ frappe.ellipsis(user.bio, 100) || \'No Bio\'}}</div>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass="text-muted text-nowrap flex-20"\n\t\t\t\t\t\tv-for="key in [\'energy_points\', \'review_points\', \'given_points\']"\n\t\t\t\t\t\t:key="key"\n\t\t\t\t\t\t@click="toggle_log(user.name)"\n\t\t\t\t\t>{{ user[key] }}</span>\n\t\t\t\t</div>\n\t\t\t\t<energy-point-history\n\t\t\t\t\tv-show="show_log_for===user.name"\n\t\t\t\t\tclass="energy-point-history"\n\t\t\t\t\t:user="user.name"\n\t\t\t\t\t:from_date="from_date"\n\t\t\t\t\t:key="user.name + user.energy_points"\n\t\t\t\t></energy-point-history>\n\t\t\t</li>\n\t\t\t<li class="user-card text-muted" v-if="!filtered_users.length">{{__(\'No user found\')}}</li>\n\t\t</ul>\n\t</div>\n</template>\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tusers: [],\n\t\t\tfilter_users_by: null,\n\t\t\tsort_users_by: \'energy_points\',\n\t\t\tsort_order: \'desc\',\n\t\t\tshow_log_for: null,\n\t\t\tperiod_options: [\'Lifetime\', \'This Month\', \'This Week\', \'Today\'],\n\t\t\tperiod: \'This Month\'\n\t\t};\n\t},\n\tcomputed: {\n\t\tfrom_date() {\n\t\t\tif (this.period === \'This Month\') {\n\t\t\t\treturn frappe.datetime.month_start();\n\t\t\t}\n\t\t\tif (this.period === \'This Week\') {\n\t\t\t\treturn frappe.datetime.week_start();\n\t\t\t}\n\t\t\tif (this.period === \'Today\') {\n\t\t\t\treturn frappe.datetime.get_today();\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tfiltered_users() {\n\t\t\tlet filtered = this.users.slice();\n\t\t\tif (this.filter_users_by) {\n\t\t\t\tfiltered = filtered.filter(user =>\n\t\t\t\t\tuser.fullname\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.includes(this.filter_users_by.toLowerCase())\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.sort_users_by) {\n\t\t\t\tfiltered.sort((a, b) => {\n\t\t\t\t\tconst value_a = a[this.sort_users_by];\n\t\t\t\t\tconst value_b = b[this.sort_users_by];\n\n\t\t\t\t\tlet return_value = 0;\n\t\t\t\t\tif (value_a > value_b) {\n\t\t\t\t\t\treturn_value = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (value_a < value_b) {\n\t\t\t\t\t\treturn_value = -1;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.sort_order === \'desc\') {\n\t\t\t\t\t\treturn_value = -return_value;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn return_value;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn filtered;\n\t\t}\n\t},\n\twatch: {\n\t\tperiod() {\n\t\t\tthis.fetch_users_energy_points_and_update_users();\n\t\t}\n\t},\n\tmounted() {\n\t\t$(\'[data-toggle="tooltip"]\').tooltip();\n\t},\n\tcreated() {\n\t\tconst standard_users = [\'Administrator\', \'Guest\', \'guest@example.com\'];\n\t\tthis.users = frappe.boot.user_info;\n\t\t// delete standard users from the list\n\t\tstandard_users.forEach(user => delete this.users[user]);\n\t\tthis.users = Object.values(this.users);\n\t\tthis.fetch_users_energy_points_and_update_users();\n\t\tfrappe.realtime.on(\'update_points\', () => {\n\t\t\tthis.fetch_users_energy_points_and_update_users();\n\t\t});\n\t},\n\tmethods: {\n\t\tget_avatar(user) {\n\t\t\treturn frappe.avatar(user, \'avatar-medium\');\n\t\t},\n\t\tgo_to_profile_page(user) {\n\t\t\tfrappe.set_route(\'social\', \'profile\', user);\n\t\t},\n\t\tfetch_users_energy_points_and_update_users() {\n\t\t\tfrappe\n\t\t\t\t.xcall(\n\t\t\t\t\t\'frappe.social.doctype.energy_point_log.energy_point_log.get_user_energy_and_review_points\',\n\t\t\t\t\t{\n\t\t\t\t\t\tfrom_date: this.from_date\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.then(data => {\n\t\t\t\t\tlet users = this.users.slice();\n\t\t\t\t\tthis.users = users.map(user => {\n\t\t\t\t\t\tconst points = data[user.name] || {};\n\t\t\t\t\t\tuser.energy_points = points.energy_points || 0;\n\t\t\t\t\t\tuser.review_points = points.review_points || 0;\n\t\t\t\t\t\tuser.given_points = points.given_points || 0;\n\t\t\t\t\t\treturn user;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\ttoggle_log(user) {\n\t\t\tfrappe.set_route(\'List\', \'Energy Point Log\', {user:user});\n\t\t}\n\t}\n};\n<\/script>\n<style lang="less" scoped>\n@import \'frappe/public/less/common\';\n.user-list {\n\tborder-left: 1px solid @border-color;\n\tborder-right: 1px solid @border-color;\n\t.user-card {\n\t\tdisplay: flex;\n\t\tcursor: pointer;\n\t\tpadding: 12px 15px;\n\t\tborder-bottom: 1px solid @border-color;\n\t\t.user-details {\n\t\t\tflex: 1;\n\t\t\t.italic {\n\t\t\t\tfont-style: italic;\n\t\t\t}\n\t\t}\n\t}\n}\n.rank-column {\n\tflex: 0 0 30px;\n\talign-self: center;\n\t.text-muted\n}\n.flex-20 {\n\tflex: 0 0 20%;\n\ttext-align: right;\n\talign-self: center;\n}\n.flex-40 {\n\tflex: 0 0 40%;\n}\n.user-list-header {\n\tbackground-color: @light-bg;\n}\n.search-bar {\n\tposition: sticky;\n\ttop: 0;\n\tbackground: white;\n\theight: 75px;\n\ttext-align: center;\n\tdiv {\n\t\tmargin: auto;\n\t}\n\twidth: 100%;\n\tleft: 0;\n}\n.energy-point-history {\n\tborder-bottom: 1px solid @border-color;\n\tbackground-color: @light-bg;\n}\n</style>\n\n\n\n']},media:void 0})},T,"data-v-e6da5ab6",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=a?i.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=i.source,d=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),a&&(l.setAttribute("data-group",s),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(a&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var p=document.createTextNode(r),c=o.element.childNodes;c[d]&&o.element.removeChild(c[d]),c.length?o.element.insertBefore(p,c[d]):o.element.appendChild(p)}}}}}),N=function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n\tNot Found\n")])};N._withStripped=!0;var L=function(e,t,n,a,i,s,o,r){var d=("function"==typeof n?n.options:n)||{};return d.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/NotFound.vue",d.render||(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),d._scopeId=a,d}({render:N,staticRenderFns:[]},0,{},void 0,!1),R={props:["src"],data:function(){return{full_size:!1}},created:function(){document.addEventListener("keyup",this.close_preview_on_escape)},destroyed:function(){document.removeEventListener("keyup",this.close_preview_on_escape)},methods:{close_preview_on_escape:function(e){27===e.keyCode&&this.$root.$emit("hide_preview")}}},I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"backdrop"},[n("img",{class:{"psuedo-zoom":e.full_size},attrs:{src:e.src},on:{dblclick:function(t){e.full_size=!e.full_size}}}),e._v(" "),n("i",{staticClass:"fa fa-close close",on:{click:function(t){return e.$root.$emit("hide_preview")}}})])};I._withStripped=!0;var Y={components:{ImageViewer:function(e,t,n,a,i,s,o,r){var d,l=("function"==typeof n?n.options:n)||{};if(l.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/components/ImageViewer.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),l._scopeId=a,t&&(d=function(e){t.call(this,o(e))}),void 0!==d)if(l.functional){var p=l.render;l.render=function(e,t){return d.call(t),p(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return l}({render:I,staticRenderFns:[]},function(e){e&&e("data-v-78654816_0",{source:".backdrop[data-v-78654816] {\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  background: #0000006e;\n  z-index: 1030;\n  top: 0;\n  right: 0;\n}\n.backdrop img[data-v-78654816] {\n  margin: auto;\n  display: block;\n  width: 80%;\n  max-width: 700px;\n  padding-top: 100px;\n}\n.backdrop .psuedo-zoom[data-v-78654816] {\n  padding: 10px 0px;\n  width: auto;\n  height: 100vh;\n  max-width: initial;\n}\n.backdrop .close[data-v-78654816] {\n  position: absolute;\n  top: 15px;\n  right: 35px;\n  color: black;\n  font-size: 30px;\n}\n",map:{version:3,sources:["ImageViewer.vue"],names:[],mappings:"AAAA;EACE,eAAe;EACf,YAAY;EACZ,WAAW;EACX,qBAAqB;EACrB,aAAa;EACb,MAAM;EACN,QAAQ;AACV;AACA;EACE,YAAY;EACZ,cAAc;EACd,UAAU;EACV,gBAAgB;EAChB,kBAAkB;AACpB;AACA;EACE,iBAAiB;EACjB,WAAW;EACX,aAAa;EACb,kBAAkB;AACpB;AACA;EACE,kBAAkB;EAClB,SAAS;EACT,WAAW;EACX,YAAY;EACZ,eAAe;AACjB",file:"ImageViewer.vue",sourcesContent:[".backdrop {\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  background: #0000006e;\n  z-index: 1030;\n  top: 0;\n  right: 0;\n}\n.backdrop img {\n  margin: auto;\n  display: block;\n  width: 80%;\n  max-width: 700px;\n  padding-top: 100px;\n}\n.backdrop .psuedo-zoom {\n  padding: 10px 0px;\n  width: auto;\n  height: 100vh;\n  max-width: initial;\n}\n.backdrop .close {\n  position: absolute;\n  top: 15px;\n  right: 35px;\n  color: black;\n  font-size: 30px;\n}\n"]},media:void 0})},R,"data-v-78654816",!1,0,function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,i){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=a?i.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var r=i.source,d=o.ids.length;if(o.ids.push(e),a&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var l=o.element=document.createElement("style");l.type="text/css",i.media&&l.setAttribute("media",i.media),a&&(l.setAttribute("data-group",s),l.setAttribute("data-next-index","0")),t.appendChild(l)}if(a&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(r),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var p=document.createTextNode(r),c=o.element.childNodes;c[d]&&o.element.removeChild(c[d]),c.length?o.element.insertBefore(p,c[d]):o.element.appendChild(p)}}}}})},data:function(){return{current_page:this.get_current_page(),show_preview:!1,preview_image_src:""}},created:function(){var e=this;this.$root.$on("show_preview",function(t){e.preview_image_src=t,e.show_preview=!0}),this.$root.$on("hide_preview",function(){e.preview_image_src="",e.show_preview=!1}),this.update_primary_action(frappe.get_route()[1])},mounted:function(){var e=this;frappe.route.on("change",function(){"social"===frappe.get_route()[0]&&(e.set_current_page(),e.update_primary_action(frappe.get_route()[1]),frappe.utils.scroll_to(0),$("body").attr("data-route",frappe.get_route_str()))}),frappe.ui.setup_like_popover($(this.$refs.social),".likes",!1)},methods:{set_current_page:function(){this.current_page=this.get_current_page()},update_primary_action:function(e){"home"===e?(this.$root.page.set_title(__("Social")),frappe.breadcrumbs.update(),this.$root.page.set_primary_action(__("Post"),function(){frappe.social.post_dialog.show()})):(frappe.breadcrumbs.add({type:"Custom",label:__("Social Home"),route:"#social/home"}),this.$root.page.clear_primary_action()),"users"===e&&this.$root.page.set_title(__("Leaderboard"))},get_current_page:function(){var e={"social/home":{component:y,props:{}},"social/profile/*":{component:z,props:{user_id:frappe.get_route()[2],key:frappe.get_route()[2]}},"social/users":{component:q,props:{}},not_found:{component:L}},t=frappe.get_route_str();return e[t]?e[t]:e[t.substring(0,t.lastIndexOf("/"))+"/*"]||e.not_found}}},M=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"social",staticClass:"social"},[t("keep-alive",[t(this.current_page.component,this._b({tag:"component"},"component",this.current_page.props,!1))],1),this._v(" "),this.show_preview?t("image-viewer",{attrs:{src:this.preview_image_src}}):this._e()],1)};M._withStripped=!0;var U=function(e,t,n,a,i,s,o,r){var d=("function"==typeof n?n.options:n)||{};return d.__file="/home/frappe/frappe-bench/apps/frappe/frappe/public/js/frappe/social/Home.vue",d.render||(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),d._scopeId=a,d}({render:M,staticRenderFns:[]},0,Y,void 0,!1);frappe.provide("frappe.social"),frappe.social.Home=class{constructor(e){var t=e.parent;this.$parent=$(t),this.page=t.page,this.setup_header(),this.make_body()}make_body(){this.$social_container=this.$parent.find(".layout-main"),new Vue({el:this.$social_container[0],render:function(e){return e(U)},data:{page:this.page}})}setup_header(){this.page.set_title(__("Social"))}},frappe.social.post_dialog=new frappe.ui.Dialog({title:__("Create Post"),fields:[{fieldtype:"Text Editor",fieldname:"content",label:__("Content"),reqd:1}],primary_action_label:__("Post"),primary_action:function(e){frappe.social.post_dialog.disable_primary_action();var t=frappe.model.get_new_doc("Post");t.content=e.content,frappe.db.insert(t).then(function(){frappe.social.post_dialog.clear(),frappe.social.post_dialog.hide()}).finally(function(){frappe.social.post_dialog.enable_primary_action()})}}),frappe.social.is_home_page=function(){return"social"===frappe.get_route()[0]&&"home"===frappe.get_route()[1]},frappe.social.is_profile_page=function(e){return"social"===frappe.get_route()[0]&&"profile"===frappe.get_route()[1]&&(!e||frappe.get_route()[2]===e)},frappe.social.is_session_user_page=function(){return frappe.social.is_profile_page()&&frappe.get_route()[2]===frappe.session.user},frappe.provide("frappe.app_updates"),frappe.utils.make_event_emitter(frappe.app_updates)}();
//# sourceMappingURL=social.min.js.map
